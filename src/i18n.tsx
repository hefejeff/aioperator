import React, { createContext, useContext, useMemo, useState, useCallback } from 'react';

export type Lang = 'English' | 'Spanish';

export const resources: Record<string, Record<string, string>> = {
  'English': {
    // Auth
    'auth.signIn': 'Sign In',
    'auth.signUp': 'Sign Up',
    'auth.createAccount': 'Create Account',
    'auth.welcomeBack': 'Welcome Back',

    // Profile
    'profile.title': 'Edit Profile',
    'profile.displayName': 'Display Name',
    'profile.avatar': 'Avatar URL',
    'profile.language': 'Language',
    'profile.cancel': 'Cancel',
    'profile.save': 'Save',

    // App
    'app.title': 'AI Operator',
    'dashboard.training': 'Training',
    'dashboard.workflowHistory': 'Workflow History',
    'dashboard.workflows': 'Workflows',
    'dashboard.yourCompanies': 'Your Companies',
    'dashboard.title': 'Dashboard',
    'dashboard.subtitle': 'Company Overview',
    'dashboard.newResearch': 'New Research',
    'dashboard.filters': 'Filters',
    'dashboard.all': 'All',
  'dashboard.lastUpdated': 'Last Updated',
    'dashboard.companiesDescription': 'Companies you are currently working with',
  'dashboard.daysAgo': '{{count}} days ago',
  'dashboard.weeksAgo': '{{count}} weeks ago',
    'workflowDetail.untitled': 'Untitled Workflow',
    'dashboard.yesterday': 'Yesterday',
    'dashboard.today': 'Today',
    'dashboard.custom': 'Custom',
    
    // Workflow Detail
    'workflowDetail.problem': 'Problem Statement',
    'workflowDetail.workflow': 'Workflow Design',
    'workflowDetail.prd': 'Product Requirements',
    'workflowDetail.prdContent': 'PRD Content',
    'workflowDetail.pitch': 'Value Proposition',
    'workflowDetail.evaluation': 'Evaluation',
    'workflowDetail.canvas': 'Canvas',
    'workflowDetail.team': 'Team',
    'workflowDetail.title': 'Title',
    'workflowDetail.score': 'Score',
    'workflowDetail.scenario': 'Scenario',
    'workflowDetail.loading': 'Loading workflow details...',
    'workflowDetail.error': 'Error loading workflow details',
    'workflowDetail.notFound': 'Workflow not found',
    'workflowDetail.lastModified': 'Last Modified',
    'workflowDetail.created': 'Created',
    'workflowDetail.status': 'Status',
    'workflowDetail.actions': 'Actions',
    'workflowDetail.edit': 'Edit Workflow',
    'workflowDetail.delete': 'Delete Workflow',
    'workflowDetail.confirmDelete': 'Are you sure you want to delete this workflow?',
  'workflowDetail.problemDescription': 'Problem Description',
  'workflowDetail.target': 'Target Outcomes',
  'workflowDetail.businessContext': 'Business Context',
  'workflowDetail.customerSegments': 'Customer Segments',
  'workflowDetail.valueProposition': 'Value Proposition',
  'workflowDetail.keyMetrics': 'Key Metrics',
  'workflowDetail.teamMembers': 'Team Members',
  'workflowDetail.teamCollaboration': 'Team Collaboration',
  'workflowDetail.teamCollaborationDesc': 'Share workflows with your team to collaborate in real time.',
  'workflowDetail.invite': 'Invite',
  'workflowDetail.inviteCollaborator': 'Invite Collaborator',
  'workflowDetail.inviting': 'Inviting...',
  'workflowDetail.emailPlaceholder': 'collaborator@example.com',
  'workflowDetail.pitchContent': 'Pitch Content',
  'workflowDetail.noPrd': 'PRD not yet generated.',
  'workflowDetail.noScenario': 'Scenario details unavailable.',
  'workflowDetail.noPitch': 'Pitch not yet generated.',
  'workflowDetail.noEvaluation': 'This workflow has not been evaluated yet.',
  'workflowDetail.evaluationDetails': 'Evaluation Details',
  'workflowDetail.evaluationId': 'Evaluation ID',
  'workflowDetail.finalScore': 'Final Score',
  'workflowDetail.feedback': 'Feedback',
  'workflowDetail.explanation': 'Workflow Explanation',
  'workflowDetail.diagram': 'Diagram',
  'workflowDetail.roles.editor': 'Editor',
  'workflowDetail.roles.viewer': 'Viewer',

    // Navigation
    'nav.title': 'Navigation',
    'nav.dashboard': 'Dashboard',
    'nav.training': 'Training',
    'nav.history': 'History',
    'nav.research': 'Research',
    'nav.library': 'Resources',
    'nav.admin': 'Admin Panel',
    'nav.home': 'Home',

    // Research
    'research.findNew': 'Find New',
    'research.findOpportunities': 'Find Opportunities',
    'research.clearCompany': 'Clear Company',
  'research.selectedScenarios': 'Selected Scenarios',
  'research.suggestSelected': 'Suggest Selected',
  'research.removeFromSelected': 'Remove from selected',
  'research.noSelectedScenarios': 'No scenarios selected',
  'research.noScenariosYet': 'No scenarios yet',
  'research.searchCompanyFirst': 'Search for a company first',
  'research.suggested': 'Suggested',
  'research.relevanceMatch': 'Relevance Match',
  'research.viewScenario': 'View Scenario',
  'research.workflowExamples': 'Workflow Examples',
  'research.workflowVersion': 'Workflow Version',
  'research.score': 'Score',
  'research.finding': 'Finding...',
  'research.createScenario': 'Create Scenario',
  'research.suggestOpportunity': 'Suggest Opportunity',
  'research.manualScenarioReason': 'Created for this company',
  'research.scenarioRuns': 'Scenario Runs',
  'research.noScenarioRuns': 'No scenario runs yet',
  'research.unknownScenario': 'Unknown Scenario',
  'research.untitledVersion': 'Untitled Version',
  'research.unknownRunDate': 'Unknown date',
  'research.ranOn': 'Ran on {{date}}',
  'research.runScore': 'Score {{score}}',
    'research.rfpUpload': 'RFP Upload',
    'research.rfpUploadHint': 'Upload an RFP document to analyze',
    'research.rfpDocument': 'RFP Document',
    'research.rfpDocumentLink': 'View uploaded RFP document',
    'research.rfpUploading': 'Uploading RFP document...',
    'research.rfpUploadSuccess': 'RFP document successfully uploaded and attached to company',
    'research.rfpUploadError': 'Error uploading RFP document',
    'research.rfpNoCompany': 'Please select a company before uploading an RFP document',
    'research.rfpInvalidType': 'Invalid file type. Please upload a PDF or document file',
    'research.rfpDelete': 'Delete RFP document',
    'research.rfpDeleteConfirm': 'Are you sure you want to delete this RFP document?',
    'research.companyInfo': 'Company Information',
    'research.description': 'Description',
    'research.industry': 'Industry',
    'research.marketPosition': 'Market Position',
    'research.products': 'Products',
    'form.optional': '(form optional)',
    'form.workflow.title': 'Create New Workflow',
    'form.domain': 'Domain',
    'form.selectDomain': 'Select a domain',
    'form.title': 'Title',
    'form.titlePlaceholder': 'Enter workflow title',
    'form.description': 'Description',
    'form.descriptionPlaceholder': 'Enter workflow description',
    'form.goal': 'Goal',
    'form.goalPlaceholder': 'Enter workflow goal',
    'form.currentWorkflow': 'Current Workflow Image',
    'form.uploadImage': 'Upload a screenshot or diagram of your current workflow',
    'form.error.required': 'Please fill in all required fields',
    'form.error.saveFailed': 'Failed to save workflow',
    'aiExample.button': 'Generate AI Example',
    'loading': 'Loading...',
  'operator.back': 'Back to Scenarios',
  'operator.aiAssist': 'AI Assist',
  'operator.explain': 'Explain the workflow',
  'operator.explainHelper': 'Describe the steps so the AI can evaluate your process.',
  'operator.visual': 'Add a visual reference',
  'operator.aiDiagramAssist': 'AI Diagram Assist',
  'operator.uploadHint': 'Upload a screenshot or diagram of your current workflow',
  'operator.selectImage': 'Select Image',
  'operator.feedback': 'Evaluation Feedback',
  'operator.aiFeedback': 'AI Feedback',
  'operator.historyTitle': 'Scenario Runs',
  'operator.noHistoryScenario': 'You have not run this scenario yet.',
  'operator.previewTitle': 'Mermaid Preview',
  'operator.copyMermaid': 'Copy Mermaid',
  'operator.useAsImage': 'Use as Image',
  'operator.refreshPreview': 'Refresh Preview',
  'operator.invalidImageAlert': 'Please upload a valid image file',

    // Research Analysis
    'research.title': 'Research',
    'research.competitors': 'Competitors',
    'research.competitors.localWholesalers': 'Local real estate wholesalers',
    'research.competitors.sundae': 'Sundae.com',
    'research.competitors.ibuyers': 'iBuyers (e.g., Opendoor, Offerpad) who sell properties to investors',
    'research.competitors.auctionPlatforms': 'Real estate auction platforms (e.g., Auction.com)',
    'research.competitors.proptech': 'Other PropTech investment platforms',
    
    'research.challenges': 'Challenges',
    'research.challenges.competition': 'High competition for distressed property inventory from iBuyers and other wholesalers.',
    'research.challenges.scaling': 'Scaling a business model that relies heavily on local agent expertise and relationships.',
    'research.challenges.manual': 'Manual and time-consuming processes for property sourcing, underwriting, and transaction coordination.',
    'research.challenges.volatility': 'Market volatility, including fluctuating interest rates and housing prices, which impacts investor demand.',
    'research.challenges.data': 'Maintaining data accuracy for property valuation (ARV) and estimated repair costs.',
    
    'research.opportunities': 'Opportunities',
    'research.relevantOpportunities': 'Relevant Opportunities',
    'research.opportunities.ai': 'Leveraging AI and automation to scale operations and increase agent productivity.',
    'research.opportunities.expansion': 'Expanding into new geographic markets to increase inventory and investor network.',
    'research.opportunities.analytics': 'Developing proprietary data analytics and predictive modeling to identify investment opportunities more effectively.',
    'research.opportunities.services': 'Offering ancillary services to investors such as financing, insurance, or connections to contractors.',
    'research.opportunities.tech': 'Enhancing their technology platform to create a more seamless digital experience for investors.',
    
    'research.aiUseCases': 'AI Use Cases',
    'research.aiUseCases.predictive': 'Predictive Analytics for Property Sourcing: Using AI to analyze public records, market trends, and demographic data to identify properties likely to become distressed and available for off-market acquisition.',
    'research.aiUseCases.valuation': 'AI-Powered Valuation (AVM): Developing an Automated Valuation Model specifically for distressed properties to accurately predict After Repair Value (ARV) and estimate renovation costs.',
    'research.aiUseCases.leads': 'Automated Lead Management: Implementing systems to automatically score, route, and nurture leads for both property acquisitions and investor sales.',
    'research.aiUseCases.matching': 'Investor-Property Matching: Using AI algorithms to match properties in inventory with the specific buying criteria of thousands of investors in their network, automating targeted marketing.',
    'research.aiUseCases.transaction': 'Automated Transaction Coordination: Streamlining the closing process by automating document collection, compliance checks, task management, and communication between parties.',
    'research.aiUseCases.copilot': 'Agent AI Co-pilot: Providing agents with AI tools to instantly analyze deals, generate property reports, draft communications, and manage their sales pipeline more efficiently.',
    
    'research.aiAnalysis': 'AI Analysis',
    'research.currentAI': 'Current AI Implementation',
    'research.potentialAI': 'AI Potential',
    'research.aiRecommendations': 'AI Recommendations',
    
    // RFP Analysis
    'research.rfpAnalysis': 'RFP Analysis',
    'research.rfpSummary': 'Summary',
    'research.rfpScope': 'Project Scope',
    'research.rfpProjectStructure': 'Project Structure',
    'research.rfpDetailedAnalysis': 'Detailed Analysis',
    'research.rfpAiAnalysis': 'AI Analysis',
    'research.rfpClarificationNeeded': 'Clarification Needed',
    'research.rfpTimeline': 'Timeline',
    'research.rfpBudget': 'Budget',
    'research.rfpRequirements': 'Requirements',
    'research.rfpStakeholders': 'Key Stakeholders',
    'research.rfpSuccessCriteria': 'Success Criteria',
    'research.rfpRisks': 'Risks',
    'research.rfpAiRecommendations': 'AI Implementation Recommendations',
    'research.rfpAiCapabilities': 'AI Capabilities',
    'research.rfpConstraints': 'Constraints',

    // Header
    'header.editProfile': 'Edit Profile',
    'header.logout': 'Log Out',

    // Login/Auth
    'login.emailLabel': 'Email Address',
    'login.emailPlaceholder': 'you@example.com',
    'login.passwordLabel': 'Password',
    'login.passwordPlaceholder': '••••••••',
    'login.displayNameLabel': 'Display Name',
    'login.displayNamePlaceholder': 'Jane Doe',
    'login.createAccount': 'Create Your Account',
    'login.welcomeBack': 'Welcome Back',
    'login.signUpSubtitle': 'Join the hub to start your training.',
    'login.loginSubtitle': 'Sign in to continue your journey.',
    'login.haveAccount': 'Already have an account? ',
    'login.noAccount': "Don't have an account? ",
    'login.loginButton': 'Login',
    'login.signUpButton': 'Sign Up',
    'login.error.userNotFound': 'No account found with this email. Please sign up.',
    'login.error.wrongPassword': 'Incorrect password. Please try again.',
    'login.error.emailInUse': 'This email is already in use. Please log in.',
    'login.error.weakPassword': 'Password should be at least 6 characters long.',
    'login.error.displayNameRequired': 'Display Name is required.',

    // Common UI Elements
    'common.close': 'Close',
    'common.cancel': 'Cancel',
    'common.save': 'Save',
    'common.delete': 'Delete',
    'common.edit': 'Edit',
    'common.search': 'Search',
    'common.loading': 'Loading...',
    'common.error': 'Error',
    'common.success': 'Success',
    'common.back': 'Back',

  // Form Related (extended)
  'form.dragToUpload': 'Drag and drop an image file here, or click to select',
  'form.imageTypes': 'Supported formats: PNG, JPG, GIF',
  'form.removeImage': 'Remove Image',

  // Domains
  'domain.sales': 'Sales',
  'domain.hr': 'Human Resources',
  'domain.finance': 'Finance',
  'domain.operations': 'Operations',
  'domain.logistics': 'Logistics',
  'domain.healthcare': 'Healthcare',
  'domain.manufacturing': 'Manufacturing',
  'domain.legal': 'Legal',
  'domain.procurement': 'Procurement',
  'domain.marketing': 'Marketing',
  'domain.it': 'Information Technology',
  'domain.customer_support': 'Customer Support'
  },
  'Spanish': {
    // Auth
    'auth.signIn': 'Iniciar Sesión',
    'auth.signUp': 'Registrarse',
    'auth.createAccount': 'Crear Cuenta',
    'auth.welcomeBack': 'Bienvenido de Nuevo',

    // Profile
    'profile.title': 'Editar Perfil',
    'profile.displayName': 'Nombre para Mostrar',
    'profile.avatar': 'URL del Avatar',
    'profile.language': 'Idioma',
    'profile.cancel': 'Cancelar',
    'profile.save': 'Guardar',

    // App
    'app.title': 'Operador IA',
    'dashboard.training': 'Entrenamiento',
    'dashboard.workflowHistory': 'Historial de Flujos de Trabajo',
    'dashboard.workflows': 'Flujos de Trabajo',
    'dashboard.yourCompanies': 'Tus Empresas',
    'dashboard.title': 'Tablero',
    'dashboard.subtitle': 'Resumen de la Empresa',
    'dashboard.newResearch': 'Nueva Investigación',
    'dashboard.filters': 'Filtros',
    'dashboard.all': 'Todos',
  'dashboard.lastUpdated': 'Última actualización',
    'dashboard.companiesDescription': 'Empresas con las que trabajas actualmente',
  'dashboard.daysAgo': 'Hace {{count}} días',
  'dashboard.weeksAgo': 'Hace {{count}} semanas',
    'workflowDetail.untitled': 'Flujo de Trabajo Sin Título',
    'dashboard.yesterday': 'Ayer',
    'dashboard.today': 'Hoy',
    'dashboard.custom': 'Personalizado',
    
    // Workflow Detail
    'workflowDetail.problem': 'Planteamiento del Problema',
    'workflowDetail.workflow': 'Diseño del Flujo de Trabajo',
    'workflowDetail.prd': 'Requerimientos del Producto',
    'workflowDetail.prdContent': 'Contenido del PRD',
    'workflowDetail.pitch': 'Propuesta de Valor',
    'workflowDetail.evaluation': 'Evaluación',
    'workflowDetail.canvas': 'Lienzo',
    'workflowDetail.team': 'Equipo',
    'workflowDetail.title': 'Título',
    'workflowDetail.score': 'Puntuación',
    'workflowDetail.scenario': 'Escenario',
    'workflowDetail.loading': 'Cargando detalles del flujo de trabajo...',
    'workflowDetail.error': 'Error al cargar los detalles del flujo de trabajo',
    'workflowDetail.notFound': 'Flujo de trabajo no encontrado',
    'workflowDetail.lastModified': 'Última Modificación',
    'workflowDetail.created': 'Creado',
    'workflowDetail.status': 'Estado',
    'workflowDetail.actions': 'Acciones',
    'workflowDetail.edit': 'Editar Flujo de Trabajo',
    'workflowDetail.delete': 'Eliminar Flujo de Trabajo',
    'workflowDetail.confirmDelete': '¿Estás seguro de que quieres eliminar este flujo de trabajo?',
  'workflowDetail.problemDescription': 'Descripción del problema',
  'workflowDetail.target': 'Resultados objetivo',
  'workflowDetail.businessContext': 'Contexto empresarial',
  'workflowDetail.customerSegments': 'Segmentos de clientes',
  'workflowDetail.valueProposition': 'Propuesta de valor',
  'workflowDetail.keyMetrics': 'Métricas clave',
  'workflowDetail.teamMembers': 'Miembros del equipo',
  'workflowDetail.teamCollaboration': 'Colaboración en equipo',
  'workflowDetail.teamCollaborationDesc': 'Comparte flujos de trabajo con tu equipo para colaborar en tiempo real.',
  'workflowDetail.invite': 'Invitar',
  'workflowDetail.inviteCollaborator': 'Invitar colaborador',
  'workflowDetail.inviting': 'Invitando...',
  'workflowDetail.emailPlaceholder': 'colaborador@ejemplo.com',
  'workflowDetail.pitchContent': 'Contenido del pitch',
  'workflowDetail.noPrd': 'PRD aún no generado.',
  'workflowDetail.noScenario': 'Detalles del escenario no disponibles.',
  'workflowDetail.noPitch': 'Pitch aún no generado.',
  'workflowDetail.noEvaluation': 'Este flujo de trabajo aún no ha sido evaluado.',
  'workflowDetail.evaluationDetails': 'Detalles de la evaluación',
  'workflowDetail.evaluationId': 'ID de la evaluación',
  'workflowDetail.finalScore': 'Puntuación final',
  'workflowDetail.feedback': 'Comentarios',
  'workflowDetail.explanation': 'Explicación del flujo de trabajo',
  'workflowDetail.diagram': 'Diagrama',
  'workflowDetail.roles.editor': 'Editor',
  'workflowDetail.roles.viewer': 'Visualizador',

    // Navigation
    'nav.title': 'Navegación',
    'nav.dashboard': 'Panel',
    'nav.training': 'Entrenamiento',
    'nav.history': 'Historial',
    'nav.research': 'Investigación',
    'nav.library': 'Recursos',
    'nav.admin': 'Panel de Admin',
    'nav.home': 'Inicio',

    // Research
    'research.findNew': 'Buscar Nuevo',
    'research.findOpportunities': 'Buscar Oportunidades',
    'research.clearCompany': 'Limpiar Empresa',
  'research.selectedScenarios': 'Escenarios Seleccionados',
  'research.suggestSelected': 'Sugerir seleccionados',
  'research.removeFromSelected': 'Quitar de seleccionados',
    'research.noSelectedScenarios': 'No hay escenarios seleccionados',
    'research.noScenariosYet': 'No hay escenarios aún',
    'research.searchCompanyFirst': 'Buscar una empresa primero',
    'research.suggested': 'Sugerido',
    'research.relevanceMatch': 'Coincidencia de relevancia',
    'research.viewScenario': 'Ver escenario',
    'research.workflowExamples': 'Ejemplos de flujo de trabajo',
    'research.workflowVersion': 'Versión del flujo de trabajo',
    'research.score': 'Puntuación',
    'research.finding': 'Buscando...',
    'research.createScenario': 'Crear escenario',
    'research.suggestOpportunity': 'Sugerir oportunidad',
  'research.manualScenarioReason': 'Creado para esta empresa',
    'research.scenarioRuns': 'Ejecuciones de escenarios',
    'research.noScenarioRuns': 'No hay ejecuciones de escenarios aún',
    'research.unknownScenario': 'Escenario desconocido',
    'research.untitledVersion': 'Versión sin título',
    'research.unknownRunDate': 'Fecha desconocida',
    'research.ranOn': 'Ejecutado el {{date}}',
    'research.runScore': 'Puntuación {{score}}',
    'research.rfpUpload': 'Subir RFP',
    'research.rfpUploadHint': 'Sube un documento RFP para analizar',
    'research.rfpDocument': 'Documento RFP',
    'research.rfpDocumentLink': 'Ver documento RFP subido',
    'research.rfpUploading': 'Subiendo documento RFP...',
    'research.rfpUploadSuccess': 'Documento RFP subido y adjuntado a la empresa exitosamente',
    'research.rfpUploadError': 'Error al subir el documento RFP',
    'research.rfpNoCompany': 'Por favor selecciona una empresa antes de subir un documento RFP',
    'research.rfpInvalidType': 'Tipo de archivo inválido. Por favor sube un archivo PDF o documento',
    'research.rfpDelete': 'Eliminar documento RFP',
    'research.rfpDeleteConfirm': '¿Estás seguro de que quieres eliminar este documento RFP?',
    'research.companyInfo': 'Información de la Empresa',
    'research.description': 'Descripción',
    'research.industry': 'Industria',
    'research.marketPosition': 'Posición en el Mercado',
    'research.products': 'Productos',
    'form.optional': '(formulario opcional)',
    'form.workflow.title': 'Crear Nuevo Flujo de Trabajo',
    'form.domain': 'Dominio',
    'form.selectDomain': 'Seleccione un dominio',
    'form.title': 'Título',
    'form.titlePlaceholder': 'Ingrese el título del flujo de trabajo',
    'form.description': 'Descripción',
    'form.descriptionPlaceholder': 'Ingrese la descripción del flujo de trabajo',
    'form.goal': 'Objetivo',
    'form.goalPlaceholder': 'Ingrese el objetivo del flujo de trabajo',
    'form.currentWorkflow': 'Imagen del Flujo de Trabajo Actual',
    'form.uploadImage': 'Suba una captura de pantalla o diagrama de su flujo de trabajo actual',
    'form.dragToUpload': 'Arrastra y suelta un archivo de imagen aquí, o haz clic para seleccionar',
    'form.imageTypes': 'Formatos admitidos: PNG, JPG, GIF',
    'form.removeImage': 'Eliminar imagen',
    'form.error.required': 'Por favor complete todos los campos requeridos',
    'form.error.saveFailed': 'Error al guardar el flujo de trabajo',
    'aiExample.button': 'Generar Ejemplo de IA',
    'loading': 'Cargando...',
  'operator.back': 'Volver a los escenarios',
  'operator.aiAssist': 'Asistente de IA',
  'operator.explain': 'Explica el flujo de trabajo',
  'operator.explainHelper': 'Describe los pasos para que la IA pueda evaluar tu proceso.',
  'operator.visual': 'Añade una referencia visual',
  'operator.aiDiagramAssist': 'Asistente de diagramas IA',
  'operator.uploadHint': 'Sube una captura o diagrama de tu flujo de trabajo actual',
  'operator.selectImage': 'Seleccionar imagen',
  'operator.feedback': 'Retroalimentación de la evaluación',
  'operator.aiFeedback': 'Comentarios de la IA',
  'operator.historyTitle': 'Ejecuciones del escenario',
  'operator.noHistoryScenario': 'Todavía no has ejecutado este escenario.',
  'operator.previewTitle': 'Vista previa de Mermaid',
  'operator.copyMermaid': 'Copiar Mermaid',
  'operator.useAsImage': 'Usar como imagen',
  'operator.refreshPreview': 'Actualizar vista previa',
  'operator.invalidImageAlert': 'Por favor suba un archivo de imagen válido',

    // Research Analysis
    'research.title': 'Investigación',
    'research.competitors': 'Competidores',
    'research.competitors.localWholesalers': 'Mayoristas inmobiliarios locales',
    'research.competitors.sundae': 'Sundae.com',
    'research.competitors.ibuyers': 'iBuyers (ej., Opendoor, Offerpad) que venden propiedades a inversores',
    'research.competitors.auctionPlatforms': 'Plataformas de subastas inmobiliarias (ej., Auction.com)',
    'research.competitors.proptech': 'Otras plataformas PropTech de inversión',
    
    'research.challenges': 'Desafíos',
    'research.challenges.competition': 'Alta competencia por inventario de propiedades en dificultades de iBuyers y otros mayoristas.',
    'research.challenges.scaling': 'Escalabilidad de un modelo de negocio que depende en gran medida de la experiencia y relaciones de agentes locales.',
    'research.challenges.manual': 'Procesos manuales y que consumen mucho tiempo para la búsqueda de propiedades, suscripción y coordinación de transacciones.',
    'research.challenges.volatility': 'Volatilidad del mercado, incluyendo fluctuaciones en tasas de interés y precios de vivienda, que impacta la demanda de inversores.',
    'research.challenges.data': 'Mantener la precisión de datos para la valoración de propiedades (ARV) y costos estimados de reparación.',
    
    'research.opportunities': 'Oportunidades',
    'research.relevantOpportunities': 'Oportunidades Relevantes',
    'research.opportunities.ai': 'Aprovechar la IA y automatización para escalar operaciones y aumentar la productividad de agentes.',
    'research.opportunities.expansion': 'Expandirse a nuevos mercados geográficos para aumentar el inventario y la red de inversores.',
    'research.opportunities.analytics': 'Desarrollar análisis de datos propietarios y modelado predictivo para identificar oportunidades de inversión más efectivamente.',
    'research.opportunities.services': 'Ofrecer servicios auxiliares a inversores como financiamiento, seguros o conexiones con contratistas.',
    'research.opportunities.tech': 'Mejorar su plataforma tecnológica para crear una experiencia digital más fluida para inversores.',
    
    'research.aiUseCases': 'Casos de Uso de IA',
    'research.aiUseCases.predictive': 'Análisis Predictivo para Búsqueda de Propiedades: Usar IA para analizar registros públicos, tendencias del mercado y datos demográficos para identificar propiedades que probablemente se volverán disponibles para adquisición fuera del mercado.',
    'research.aiUseCases.valuation': 'Valoración Impulsada por IA (AVM): Desarrollar un Modelo de Valoración Automatizada específicamente para propiedades en dificultades para predecir con precisión el Valor Después de Reparación (ARV) y estimar costos de renovación.',
    'research.aiUseCases.leads': 'Gestión Automatizada de Leads: Implementar sistemas para calificar, enrutar y nutrir automáticamente leads tanto para adquisiciones de propiedades como ventas a inversores.',
    'research.aiUseCases.matching': 'Emparejamiento Inversor-Propiedad: Usar algoritmos de IA para emparejar propiedades en inventario con los criterios específicos de compra de miles de inversores en su red, automatizando el marketing dirigido.',
    'research.aiUseCases.transaction': 'Coordinación Automatizada de Transacciones: Optimizar el proceso de cierre automatizando la recolección de documentos, verificaciones de cumplimiento, gestión de tareas y comunicación entre partes.',
    'research.aiUseCases.copilot': 'Copiloto IA para Agentes: Proporcionar a los agentes herramientas de IA para analizar instantáneamente ofertas, generar informes de propiedades, redactar comunicaciones y gestionar su pipeline de ventas más eficientemente.',
    
    'research.aiAnalysis': 'Análisis de IA',
    'research.currentAI': 'Implementación Actual de IA',
    'research.potentialAI': 'Potencial de IA',
    'research.aiRecommendations': 'Recomendaciones de IA',
    
    // RFP Analysis
    'research.rfpAnalysis': 'Análisis de RFP',
    'research.rfpSummary': 'Resumen',
    'research.rfpScope': 'Alcance del Proyecto',
    'research.rfpProjectStructure': 'Estructura del Proyecto',
    'research.rfpDetailedAnalysis': 'Análisis Detallado',
    'research.rfpAiAnalysis': 'Análisis de IA',
    'research.rfpClarificationNeeded': 'Se Necesita Aclaración',
    'research.rfpTimeline': 'Cronograma',
    'research.rfpBudget': 'Presupuesto',
    'research.rfpRequirements': 'Requisitos',
    'research.rfpStakeholders': 'Interesados Clave',
    'research.rfpSuccessCriteria': 'Criterios de Éxito',
    'research.rfpRisks': 'Riesgos',
    'research.rfpAiRecommendations': 'Recomendaciones de Implementación de IA',
    'research.rfpAiCapabilities': 'Capacidades de IA',
    'research.rfpConstraints': 'Restricciones',

    // Header
    'header.editProfile': 'Editar Perfil',
    'header.logout': 'Cerrar Sesión',

    // Login/Auth
    'login.emailLabel': 'Correo Electrónico',
    'login.emailPlaceholder': 'tu@ejemplo.com',
    'login.passwordLabel': 'Contraseña',
    'login.passwordPlaceholder': '••••••••',
    'login.displayNameLabel': 'Nombre para Mostrar',
    'login.displayNamePlaceholder': 'Jane Doe',
    'login.createAccount': 'Crea tu Cuenta',
    'login.welcomeBack': 'Bienvenido de Nuevo',
    'login.signUpSubtitle': 'Únete al centro para comenzar tu entrenamiento.',
    'login.loginSubtitle': 'Inicia sesión para continuar tu viaje.',
    'login.haveAccount': '¿Ya tienes una cuenta? ',
    'login.noAccount': "¿No tienes una cuenta? ",
    'login.loginButton': 'Iniciar Sesión',
    'login.signUpButton': 'Registrarse',
    'login.error.userNotFound': 'No se encontró ninguna cuenta con este correo. Por favor regístrate.',
    'login.error.wrongPassword': 'Contraseña incorrecta. Por favor intenta de nuevo.',
    'login.error.emailInUse': 'Este correo ya está en uso. Por favor inicia sesión.',
    'login.error.weakPassword': 'La contraseña debe tener al menos 6 caracteres.',
    'login.error.displayNameRequired': 'El nombre para mostrar es requerido.',

    // Common UI Elements
    'common.close': 'Cerrar',
    'common.cancel': 'Cancelar',
    'common.save': 'Guardar',
    'common.delete': 'Eliminar',
    'common.edit': 'Editar',
    'common.search': 'Buscar',
    'common.loading': 'Cargando...',
    'common.error': 'Error',
    'common.success': 'Éxito',
    'common.back': 'Volver',

    // Domains
    'domain.sales': 'Ventas',
    'domain.hr': 'Recursos Humanos',
    'domain.finance': 'Finanzas',
    'domain.operations': 'Operaciones',
    'domain.logistics': 'Logística',
    'domain.healthcare': 'Salud',
    'domain.manufacturing': 'Fabricación',
    'domain.legal': 'Legal',
    'domain.procurement': 'Compras',
    'domain.marketing': 'Marketing',
    'domain.it': 'Tecnología de la Información',
    'domain.customer_support': 'Atención al Cliente'
  }
};

type I18nContextShape = {
  lang: Lang;
  setLang: (l: Lang) => void;
  t: (key: string, vars?: Record<string, string | number>) => string;
};

const I18nContext = createContext<I18nContextShape>({
  lang: 'English',
  setLang: () => {},
  t: (k) => k,
});

export const I18nProvider: React.FC<{ initial?: Lang; children?: React.ReactNode }> = ({ initial = 'English', children }) => {
  const [lang, setLang] = useState<Lang>(initial);
  
  React.useEffect(() => {
    const onProfileUpdated = (e: Event) => {
      try {
        const detail = (e as CustomEvent).detail as { preferredLanguage?: Lang } | undefined;
        if (detail && detail.preferredLanguage) {
          setLang(detail.preferredLanguage);
        }
      } catch (err) {
        // ignore
      }
    };
    if (typeof window !== 'undefined') {
      window.addEventListener('profile-updated', onProfileUpdated as EventListener);
    }
    return () => {
      if (typeof window !== 'undefined') {
        window.removeEventListener('profile-updated', onProfileUpdated as EventListener);
      }
    };
  }, []);

  const t = useCallback((key: string, vars?: Record<string, string | number>) => {
    const dict = resources[lang] || resources['English'];
    const raw = dict[key] ?? key;
    if (!vars) return raw;
    return Object.keys(vars).reduce((s, k) => s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(vars[k])), raw);
  }, [lang]);

  const memoizedSetLang = useCallback((newLang: Lang) => {
    setLang(newLang);
    localStorage.setItem('preferredLanguage', newLang);
  }, []);

  const value = useMemo(() => ({ lang, setLang: memoizedSetLang, t }), [lang, memoizedSetLang, t]);
  
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
};

export const useTranslation = () => useContext(I18nContext);

export default resources;