import React, { createContext, useContext, useMemo, useState } from 'react';

export type Lang = 'English' | 'Spanish';

const resources: Record<string, Record<string, string>> = {
  English: {
    'app.title': 'AI Operator Hub',
    'nav.dashboard': 'Dashboard',
    'nav.playground': 'Playground',
    'nav.home': 'Home',
    'nav.training': 'Training',
    'nav.admin': 'Admin',
    'header.editProfile': 'Edit Profile',
    'header.logout': 'Logout',

    // Create scenario
  'create.title': 'Create a New Workflow',
    'create.domain': 'Domain (optional)',
    'create.language': 'Language',
    'create.titleField': 'Scenario Title',
    'create.description': 'Description',
    'create.goal': 'Your Goal',
    'create.generate': 'Generate with AI',
    'create.orFill': 'or fill manually',
    'create.domainAuto': 'Auto (preferred varied domains)',
    'create.descriptionPlaceholder': "A brief overview of the scenario's context.",
    'create.goalPlaceholder': 'Describe the task the user needs to accomplish. What workflow should they design?',
    'create.errorRequired': 'All fields are required.',
    'create.errorSaveFailed': 'Failed to save scenario. Please try again later.',
    'create.generateErrorNonJson': 'AI returned non-JSON output; response placed into Description for editing.',
    'create.generateErrorFailed': 'Failed to generate scenario. Check console for details or ensure API key is configured.',
    'create.cancel': 'Cancel',
  'create.save': 'Save Workflow',
  // AI example generation (scenario creation & landing)
  'aiExample.button': 'AI Example',
  'aiExample.exampleProblem': 'Example Problem',
  'aiExample.useDescription': 'Use as Description',
  'aiExample.useTarget': 'Use as Target',
  'aiExample.useProblem': 'Use Example',
  'aiExample.clear': 'Clear',

    // Operator console
    'operator.back': 'Back',
    'operator.design': 'Design Your Workflow',
    'operator.explain': 'Explain Your Workflow',
    'operator.visual': 'Visual Workflow (Optional)',
    'operator.evaluate': 'Evaluate My Workflow',
    'operator.feedback': 'Workflow Feedback',
    'operator.historyTitle': 'Your History for this Scenario',
    'operator.uploadHint': 'Upload a screenshot of your workflow (e.g., from Miro, Figma).',
    'operator.selectImage': 'Select Image',
  'operator.invalidImageAlert': 'Please upload a valid image file (PNG, JPG, etc.).',
  'operator.saveEvalFailed': 'Could not save your evaluation. Please check your connection and try again.',
  'operator.explainHelper': 'Describe the steps in your process. Specify which tasks are handled by AI and which require human intervention.',
    'operator.yourGoalLabel': 'Your Goal:',
    'operator.yourScore': 'Your Score',
    'operator.aiFeedback': 'Feedback from AI Consultant:',
  'operator.aiAssist': 'AI Assist: draft explanation',
  'operator.aiDiagramAssist': 'AI Assist: create diagram',
  'operator.previewTitle': 'Diagram Preview',
  'operator.copyMermaid': 'Copy Mermaid',
  'operator.useAsImage': 'Use as Image',
  'operator.refreshPreview': 'Refresh Preview',
    'operator.noHistoryScenario': 'No history for this scenario yet. Submit a workflow to see your results here!',

    // Sidebar & leaderboard
    'sidebar.yourStats': 'Your Stats',
    'sidebar.yourWorkflows': 'Your Workflows',
    'sidebar.teamTitle': 'Team Collaboration',
    'sidebar.teamMembers': 'Team Members',
    'sidebar.inviteCollaborator': 'Invite Collaborator',
    'sidebar.inviteEmailPlaceholder': 'Enter email address...',
    'sidebar.invite': 'Invite',
    'sidebar.inviting': 'Inviting...',
    'sidebar.role.owner': 'Owner',
    'sidebar.role.editor': 'Editor',
    'sidebar.role.viewer': 'Viewer',
    'noWorkflowsYet': 'No workflows saved yet',
    'workflowDetail.error': 'Workflow Error',
    'workflowDetail.notFound': 'Workflow not found',
    'workflowDetail.untitled': 'Untitled Workflow',
    'workflowDetail.scenario': 'Scenario',
    'workflowDetail.score': 'Score',
    'workflowDetail.problem': 'Problem',
    'workflowDetail.workflow': 'Workflow',
    'workflowDetail.prd': 'PRD',
    'workflowDetail.pitch': 'Pitch',
    'workflowDetail.evaluation': 'Evaluation',
    'workflowDetail.explanation': 'Workflow Explanation',
    'workflowDetail.diagram': 'Workflow Diagram',
    'workflowDetail.image': 'Workflow Image',
    'workflowDetail.prdContent': 'PRD Content',
    'workflowDetail.noPrd': 'No PRD available for this workflow',
    'workflowDetail.pitchContent': 'Pitch Content',
    'workflowDetail.noPitch': 'No pitch available for this workflow',
    'workflowDetail.evaluationDetails': 'Evaluation Details',
    'workflowDetail.finalScore': 'Final Score',
    'workflowDetail.feedback': 'Feedback',
    'workflowDetail.evaluationId': 'Evaluation ID',
    'workflowDetail.noEvaluation': 'No evaluation available for this workflow',
    'workflowDetail.canvas': 'Canvas',
    'workflowDetail.team': 'Team',
    'workflowDetail.teamCollaboration': 'Team Collaboration',
    'workflowDetail.teamMembers': 'Team Members',
    'workflowDetail.inviteCollaborator': 'Invite Collaborator',
    'workflowDetail.emailPlaceholder': 'Enter email address...',
    'workflowDetail.roles.viewer': 'Viewer',
    'workflowDetail.roles.editor': 'Editor',
    'workflowDetail.invite': 'Invite',
    'workflowDetail.inviting': 'Inviting...',
    'workflowDetail.teamCollaborationDesc': 'Invite team members to collaborate on this specific workflow. Viewers can see the workflow, while editors can make changes.',
    // Canvas translations
    'canvas.problem': 'Problem',
    'canvas.solution': 'Solution',
    'canvas.keyMetrics': 'Key Metrics',
    'canvas.uniqueValueProposition': 'Unique Value Proposition',
    'canvas.unfairAdvantage': 'Unfair Advantage',
    'canvas.channels': 'Channels',
    'canvas.customerSegments': 'Customer Segments',
    'canvas.costStructure': 'Cost Structure',
    'canvas.revenueStreams': 'Revenue Streams',
    'canvas.existingAlternatives': 'Existing alternatives',
    'canvas.currentSolutions': 'Current solutions',
    'canvas.manualProcesses': 'Manual processes',
    'canvas.automatedSteps': 'Automated steps',
    'canvas.aiIntegration': 'AI integration',
    'canvas.processOptimization': 'Process optimization',
    'canvas.timeReduction': 'Time reduction',
    'canvas.errorMinimization': 'Error minimization',
    'canvas.scalability': 'Scalability',
    'canvas.aiCapabilities': 'AI-powered capabilities',
    'canvas.processExpertise': 'Process expertise',
    'canvas.microsoftEcosystem': 'Microsoft ecosystem',
    'canvas.googleEcosystem': 'Google ecosystem',
    'canvas.enterprisePlatforms': 'Enterprise platforms',
    'canvas.developmentCosts': 'Development costs',
    'canvas.platformLicensing': 'Platform licensing',
    'canvas.developmentTime': 'Development time',
    'canvas.maintenanceSupport': 'Maintenance & support',
    'canvas.costSavings': 'Cost savings',
    'canvas.revenueIncrease': 'Revenue increase',
    'canvas.efficiencyGains': 'Efficiency gains',
    'canvas.edit': 'Edit Canvas',
    'canvas.save': 'Save Changes',
    'canvas.cancel': 'Cancel',
    'canvas.editSection': 'Edit',
    'canvas.saveSection': 'Save',
    'canvas.cancelSection': 'Cancel',
    'canvas.addItem': 'Add item',
    'canvas.addSubItem': 'Add sub-item...',
    'canvas.showMore': 'Show more',
    'canvas.showLess': 'Show less',
    'workflowDetail.title': 'Scenario Title',
    'workflowDetail.problemDescription': 'Problem Description',
    'workflowDetail.target': 'Target/Goal',
    'workflowDetail.businessContext': 'Business Context',
    'workflowDetail.customerSegments': 'Customer Segments',
    'workflowDetail.valueProposition': 'Value Proposition',
    'workflowDetail.keyMetrics': 'Key Metrics',
    'workflowDetail.noScenario': 'Scenario information not available',
    'sidebar.average': 'Average score',
    'sidebar.topScores': 'Top scores (9+)',
    'sidebar.recentActivity': 'Recent activity',
  'sidebar.tipsTitle': 'Workflow Tips',
  'sidebar.tip.1': 'Be explicit which steps are AI vs human to score higher.',
  'sidebar.tip.2': 'Mention data sources and how outputs are validated.',
  'sidebar.tip.3': 'Add guardrails for failure or low\u2011confidence AI results.',
  'sidebar.tip.4': 'Show iterative loops: review, refine, re-run when needed.',
  'sidebar.tip.5': 'Keep steps atomic; split multi-action steps for clarity.',
  // leaderboard removed

    // Profile
    'profile.title': 'Edit Profile',
    'profile.displayName': 'Display name',
    'profile.avatar': 'Avatar URL (optional)',
    'profile.language': 'Preferred language',
    'profile.cancel': 'Cancel',
    'profile.save': 'Save',

    // Dashboard
    'dashboard.welcome': 'Welcome Back, {name}!',
    'dashboard.trainingGround': 'Training Ground',
    'dashboard.noScores': 'No scores yet — complete a scenario to build your average.',
    'dashboard.recentActivity': 'Recent Activity',
    'dashboard.noActivity': 'No activity yet',
    'dashboard.noActivityInfo': 'Complete a scenario to see your results here.',
    'dashboard.workflows': 'Workflows',
    'dashboard.evaluations': 'Evaluations',
    'dashboard.bestScore': 'Best Score',
    'dashboard.avgScore': 'Avg',
    'dashboard.lastActivity': 'Last activity',
    'dashboard.today': 'today',
    'dashboard.yesterday': 'yesterday',
    'dashboard.daysAgo': '{count} days ago',
    'dashboard.weeksAgo': '{count} weeks ago',
    'dashboard.training': 'Training',
    'dashboard.evaluation': 'Evaluation',
    'dashboard.continue': 'Continue',
    'dashboard.start': 'Start',
    'dashboard.viewDetails': 'View Details',
    'dashboard.completedWorkflows': 'Scenarios Completed',
    'dashboard.noCompletedWorkflows': 'No completed workflows yet',
    'dashboard.noCompletedWorkflowsInfo': 'Start working on scenarios to see your completed workflows here.',
    'dashboard.startFirstWorkflow': 'Start Your First Workflow',
    'dashboard.reviewWorkflows': 'Review your completed workflows and continue developing your AI processes',
    'dashboard.workflowHistory': 'Workflow History',
    'dashboard.noWorkflows': 'No workflows yet',
    'dashboard.viewAllWorkflows': 'View all {count} workflows',
    'dashboard.noScore': 'No score',

  // Training (renamed branding)
  'training.title': 'Workflow Playground',
  'training.subtitle': 'Experiment, create, and explore new AI-powered processes.',
    'training.createButton': 'Create New Workflow',
    'training.filter': 'Filter:',
    'filter.all': 'All',

    // History
    'history.title': 'Your Evaluation History',
    'history.noHistory': 'No History Found',
    'history.noEntries': 'Complete some training or evaluation scenarios to see your progress here.',
    'history.viewDiagram': 'View Submitted Diagram',
    'history.feedback': 'Feedback:',
    'history.workflowExplanation': 'Your Workflow Explanation:',
    'history.score': 'Score',

    // Scenario card
    'scenario.custom': 'Custom',
    'scenario.deleteConfirm': 'Delete this scenario? This cannot be undone.',
    'scenario.delete': 'Delete scenario',
  'scenario.start': 'Start Workflow',
    'scenario.highScoreLabel': 'High Score',
    'scenario.avgScoreLabel': 'Avg Score',

  // AI Actions Panel
  'aiActions.title': 'AI Actions',
  'aiActions.subtitle': 'Generate and evaluate artifacts for {platform}.',
  'aiActions.platformFallback': 'your platform',
  'aiActions.needWorkflow': 'Add a workflow explanation above to enable AI actions.',
  'aiActions.platformOptions': 'Platform Options',
  'toolsDocs.title': 'Tools & Docs',
  'toolsDocs.recent': 'Recent Docs',
  'toolsDocs.latestPrd': 'Latest PRD',
  'toolsDocs.latestPitch': 'Latest Pitch',
  'prd.generateShort': 'PRD',
  'pitch.generateShort': 'Pitch',
  'evaluation.run': 'Evaluate',

    // Misc
    'loading': 'Loading...',
    'noRecentActivity': 'No recent activity',

  // Auth
  'auth.signUp': 'Sign up',
  'auth.signIn': 'Sign in',
  'auth.signInToContinue': 'Sign in to continue',
  'auth.createAccount': 'Create your account',
  'auth.welcomeBack': 'Welcome back',

  // Platform labels
  'platform.ms365': 'Microsoft 365',
  'platform.google': 'Google Workspace',
  'platform.custom': 'Custom App',
  'platform.customPrompt': 'Custom Prompt(s)',
  'platform.assistant': 'Assistant(s)',
  'platform.combination': 'Combination',

  // Public landing
  'landing.problem.title': "What’s Your Problem??",
  'landing.problem.subtitle': 'Describe your challenge. We’ll help design an AI-powered workflow and generate a PRD tailored to your platform.',
  'landing.problem.label': 'Your problem',
  'landing.problem.placeholder': 'e.g., Our support team spends hours triaging emails. We need to auto-categorize requests, draft replies, and escalate complex cases.',
  'landing.platform.label': 'Target platform',
  'landing.domain.label': 'Domain',
  'landing.domain.auto': 'Auto (recommended)',
  'landing.domain.createNew': 'Create new domain…',
  'landing.domain.customPlaceholder': 'e.g., Compliance, R&D, Field Ops',
  'landing.cta.design': 'Design my workflow',
  'landing.cta.explore': 'Explore features',
  'landing.alert.enterProblem': 'Tell us your problem to begin.',
  'landing.alert.enterCustomDomain': 'Enter a domain name or choose Auto.',
  'landing.highlights.1.title': 'Draft workflows with AI',
  'landing.highlights.1.desc': 'Turn goals into clear, step-by-step flows with AI assist and Mermaid diagrams.',
  'landing.highlights.2.title': 'Generate PRDs by platform',
  'landing.highlights.2.desc': 'Create product-ready PRDs tailored for Microsoft 365, Google Workspace, or custom stacks.',
  'landing.highlights.3.title': 'Perfect your elevator pitch',
  'landing.highlights.3.desc': 'Auto-generate and refine concise pitches you can save and share.',
  'landing.how.title': 'How it works',
  'landing.how.step1.title': '1. Describe your goal',
  'landing.how.step1.desc': 'Start with a simple objective. Use AI Assist to draft your workflow steps.',
  'landing.how.step2.title': '2. Visualize and iterate',
  'landing.how.step2.desc': 'Render Mermaid diagrams, adjust steps, and refine with suggestions.',
  'landing.how.step3.title': '3. Generate artifacts',
  'landing.how.step3.desc': 'Produce platform-specific PRDs and an elevator pitch. Save them for later.',
  'landing.cta.createFirst': 'Create your first workflow',
  'landing.preview.title': 'See an example workflow',
  'landing.preview.subtitle': 'Here’s a quick example of what your AI-assisted flow might look like. Sign up to generate, edit, and save your own.',
  'landing.preview.exampleTitle': 'Example: Support Ticket Triage',
  'landing.preview.step1': 'Detect incoming email and extract key fields (sender, subject, body).',
  'landing.preview.step2': 'AI categorizes intent and urgency; human reviews edge cases.',
  'landing.preview.step3': 'Draft response with AI; route to queue or escalate to agent.',
  'landing.preview.step4': 'Log resolution and collect feedback for continuous improvement.',
  'landing.preview.platformNote': 'Tailored for {platform}',
  'landing.preview.yourProblem': 'Your problem',
  'landing.preview.sketchTitle': 'One-line sketch',
  'landing.preview.sketchTemplate': 'AI analyzes and routes “{problem}” for {platform}{domainSuffix}, drafts outputs, and escalates edge cases.',
  'landing.preview.sketchDomainSuffix': ' in {domain}',
  'landing.preview.signup': 'Sign up to continue',
  'landing.preview.signin': 'Sign in',
  'landing.preview.close': 'Close',
  // Domain names (display)
  'domain.Sales': 'Sales',
  'domain.HR': 'HR',
  'domain.Finance': 'Finance',
  'domain.Operations': 'Operations',
  'domain.Logistics': 'Logistics',
  'domain.Healthcare': 'Healthcare',
  'domain.Manufacturing': 'Manufacturing',
  'domain.Legal': 'Legal',
  'domain.Procurement': 'Procurement',
  'domain.Marketing': 'Marketing',
  'domain.IT': 'IT',
  'domain.Customer Support': 'Customer Support',
  'common.close': 'Close',
  },
  es: {
    'app.title': 'Centro de Operadores AI',
    'nav.dashboard': 'Tablero',
    'nav.playground': 'Laboratorio',
    'nav.home': 'Inicio',
    'nav.training': 'Entrenamiento',
    'nav.admin': 'Admin',
    'header.editProfile': 'Editar Perfil',
    'header.logout': 'Cerrar sesión',

    // Create scenario
    'create.title': 'Crear un Nuevo Flujo de Trabajo',
    'create.domain': 'Dominio (opcional)',
    'create.language': 'Idioma',
    'create.titleField': 'Título del Escenario',
    'create.description': 'Descripción',
    'create.goal': 'Tu Objetivo',
    'create.generate': 'Generar con IA',
    'create.orFill': 'o completar manualmente',
  'create.domainAuto': 'Automático (preferir dominios variados)',
  'create.descriptionPlaceholder': 'Una breve descripción del contexto del escenario.',
  'create.goalPlaceholder': 'Describe la tarea que el usuario debe lograr. ¿Qué flujo de trabajo deberían diseñar?',
  'create.errorRequired': 'Todos los campos son obligatorios.',
  'create.errorSaveFailed': 'No se pudo guardar el escenario. Intenta de nuevo más tarde.',
  'create.generateErrorNonJson': 'La IA devolvió una respuesta no JSON; la respuesta se colocó en Descripción para editarla.',
  'create.generateErrorFailed': 'No se pudo generar el escenario. Revisa la consola para más detalles o asegúrate de que la clave de API esté configurada.',
    'create.cancel': 'Cancelar',
  'create.save': 'Guardar Flujo de Trabajo',
  // AI example generation (scenario creation & landing)
  'aiExample.button': 'Ejemplo IA',
  'aiExample.exampleProblem': 'Problema de Ejemplo',
  'aiExample.useDescription': 'Usar como Descripción',
  'aiExample.useTarget': 'Usar como Objetivo',
  'aiExample.useProblem': 'Usar Ejemplo',
  'aiExample.clear': 'Limpiar',

    // Operator console
    'operator.back': 'Atrás',
    'operator.design': 'Diseña tu Flujo de Trabajo',
    'operator.explain': 'Explica Tu Flujo de Trabajo',
    'operator.visual': 'Flujo Visual (Opcional)',
    'operator.evaluate': 'Evaluar mi Flujo',
    'operator.feedback': 'Comentarios del Flujo',
    'operator.historyTitle': 'Tu Historial para este Escenario',
    'operator.uploadHint': 'Sube una captura de pantalla de tu flujo de trabajo (por ejemplo, desde Miro, Figma).',
    'operator.selectImage': 'Seleccionar imagen',
  'operator.invalidImageAlert': 'Por favor sube un archivo de imagen válido (PNG, JPG, etc.).',
  'operator.saveEvalFailed': 'No se pudo guardar tu evaluación. Revisa tu conexión e inténtalo de nuevo.',
  'operator.explainHelper': 'Describe los pasos de tu proceso. Indica qué tareas realiza la IA y cuáles requieren intervención humana.',
    'operator.yourGoalLabel': 'Tu objetivo:',
    'operator.yourScore': 'Tu puntuación',
    'operator.aiFeedback': 'Comentarios del Consultor IA:',
  'operator.aiAssist': 'Asistencia IA: borrador de explicación',
  'operator.aiDiagramAssist': 'Asistencia IA: crear diagrama',
  'operator.previewTitle': 'Vista previa del diagrama',
  'operator.copyMermaid': 'Copiar Mermaid',
  'operator.useAsImage': 'Usar como imagen',
  'operator.refreshPreview': 'Actualizar vista previa',
    'operator.noHistoryScenario': 'No hay historial para este escenario todavía. ¡Envía un flujo de trabajo para ver tus resultados aquí!',

    // Sidebar & leaderboard
    'sidebar.yourStats': 'Tus Estadísticas',
    'sidebar.yourWorkflows': 'Tus Flujos de Trabajo',
    'sidebar.teamTitle': 'Colaboración en Equipo',
    'sidebar.teamMembers': 'Miembros del Equipo',
    'sidebar.inviteCollaborator': 'Invitar Colaborador',
    'sidebar.inviteEmailPlaceholder': 'Ingresa dirección de correo...',
    'sidebar.invite': 'Invitar',
    'sidebar.inviting': 'Invitando...',
    'sidebar.role.owner': 'Propietario',
    'sidebar.role.editor': 'Editor',
    'sidebar.role.viewer': 'Observador',
    'noWorkflowsYet': 'No hay flujos de trabajo guardados aún',
    'workflowDetail.error': 'Error del Flujo de Trabajo',
    'workflowDetail.notFound': 'Flujo de trabajo no encontrado',
    'workflowDetail.untitled': 'Flujo de Trabajo Sin Título',
    'workflowDetail.scenario': 'Escenario',
    'workflowDetail.score': 'Puntuación',
    'workflowDetail.problem': 'Problema',
    'workflowDetail.workflow': 'Flujo de Trabajo',
    'workflowDetail.prd': 'PRD',
    'workflowDetail.pitch': 'Presentación',
    'workflowDetail.evaluation': 'Evaluación',
    'workflowDetail.explanation': 'Explicación del Flujo de Trabajo',
    'workflowDetail.diagram': 'Diagrama del Flujo de Trabajo',
    'workflowDetail.image': 'Imagen del Flujo de Trabajo',
    'workflowDetail.prdContent': 'Contenido del PRD',
    'workflowDetail.noPrd': 'No hay PRD disponible para este flujo de trabajo',
    'workflowDetail.pitchContent': 'Contenido de la Presentación',
    'workflowDetail.noPitch': 'No hay presentación disponible para este flujo de trabajo',
    'workflowDetail.evaluationDetails': 'Detalles de la Evaluación',
    'workflowDetail.finalScore': 'Puntuación Final',
    'workflowDetail.feedback': 'Retroalimentación',
    'workflowDetail.evaluationId': 'ID de Evaluación',
    'workflowDetail.noEvaluation': 'No hay evaluación disponible para este flujo de trabajo',
    'workflowDetail.canvas': 'Lienzo',
    'workflowDetail.team': 'Equipo',
    'workflowDetail.teamCollaboration': 'Colaboración en Equipo',
    'workflowDetail.teamMembers': 'Miembros del Equipo',
    'workflowDetail.inviteCollaborator': 'Invitar Colaborador',
    'workflowDetail.emailPlaceholder': 'Ingresa dirección de correo...',
    'workflowDetail.roles.viewer': 'Observador',
    'workflowDetail.roles.editor': 'Editor',
    'workflowDetail.invite': 'Invitar',
    'workflowDetail.inviting': 'Invitando...',
    'workflowDetail.teamCollaborationDesc': 'Invita miembros del equipo a colaborar en este flujo de trabajo específico. Los observadores pueden ver el flujo de trabajo, mientras que los editores pueden hacer cambios.',
    // Canvas translations
    'canvas.problem': 'Problema',
    'canvas.solution': 'Solución',
    'canvas.keyMetrics': 'Métricas Clave',
    'canvas.uniqueValueProposition': 'Propuesta de Valor Única',
    'canvas.unfairAdvantage': 'Ventaja Competitiva',
    'canvas.channels': 'Canales',
    'canvas.customerSegments': 'Segmentos de Clientes',
    'canvas.costStructure': 'Estructura de Costos',
    'canvas.revenueStreams': 'Fuentes de Ingresos',
    'canvas.existingAlternatives': 'Alternativas existentes',
    'canvas.currentSolutions': 'Soluciones actuales',
    'canvas.manualProcesses': 'Procesos manuales',
    'canvas.automatedSteps': 'Pasos automatizados',
    'canvas.aiIntegration': 'Integración de IA',
    'canvas.processOptimization': 'Optimización de procesos',
    'canvas.timeReduction': 'Reducción de tiempo',
    'canvas.errorMinimization': 'Minimización de errores',
    'canvas.scalability': 'Escalabilidad',
    'canvas.aiCapabilities': 'Capacidades impulsadas por IA',
    'canvas.processExpertise': 'Experiencia en procesos',
    'canvas.microsoftEcosystem': 'Ecosistema Microsoft',
    'canvas.googleEcosystem': 'Ecosistema Google',
    'canvas.enterprisePlatforms': 'Plataformas empresariales',
    'canvas.developmentCosts': 'Costos de desarrollo',
    'canvas.platformLicensing': 'Licenciamiento de plataforma',
    'canvas.developmentTime': 'Tiempo de desarrollo',
    'canvas.maintenanceSupport': 'Mantenimiento y soporte',
    'canvas.costSavings': 'Ahorros de costos',
    'canvas.revenueIncrease': 'Aumento de ingresos',
    'canvas.efficiencyGains': 'Ganancias de eficiencia',
    'canvas.edit': 'Editar Lienzo',
    'canvas.save': 'Guardar Cambios',
    'canvas.cancel': 'Cancelar',
    'canvas.editSection': 'Editar',
    'canvas.saveSection': 'Guardar',
    'canvas.cancelSection': 'Cancelar',
    'canvas.addItem': 'Agregar elemento',
    'canvas.addSubItem': 'Agregar sub-elemento...',
    'canvas.showMore': 'Ver más',
    'canvas.showLess': 'Ver menos',
    'workflowDetail.title': 'Título del Escenario',
    'workflowDetail.problemDescription': 'Descripción del Problema',
    'workflowDetail.target': 'Objetivo/Meta',
    'workflowDetail.businessContext': 'Contexto de Negocio',
    'workflowDetail.customerSegments': 'Segmentos de Clientes',
    'workflowDetail.valueProposition': 'Propuesta de Valor',
    'workflowDetail.keyMetrics': 'Métricas Clave',
    'workflowDetail.noScenario': 'Información del escenario no disponible',
    'sidebar.average': 'Puntuación media',
    'sidebar.topScores': 'Mejores puntuaciones (9+)',
    'sidebar.recentActivity': 'Actividad reciente',
  'sidebar.tipsTitle': 'Consejos de Flujo',
  'sidebar.tip.1': 'Sé explícito: qué pasos son IA vs humanos para mayor puntuación.',
  'sidebar.tip.2': 'Menciona fuentes de datos y cómo se validan los resultados.',
  'sidebar.tip.3': 'Añade barandillas para fallos o baja confianza de la IA.',
  'sidebar.tip.4': 'Muestra bucles iterativos: revisar, refinar, re-ejecutar.',
  'sidebar.tip.5': 'Mantén pasos atómicos; divide pasos con múltiples acciones.',
  // leaderboard removed

    // Profile
    'profile.title': 'Editar Perfil',
    'profile.displayName': 'Nombre a mostrar',
    'profile.avatar': 'URL del Avatar (opcional)',
    'profile.language': 'Idioma preferido',
    'profile.cancel': 'Cancelar',
    'profile.save': 'Guardar',

    // Dashboard
    'dashboard.welcome': '¡Bienvenido de nuevo, {name}!',
    'dashboard.trainingGround': 'Campo de Entrenamiento',
    'dashboard.noScores': 'Aún no hay puntuaciones — completa un escenario para construir tu promedio.',
    'dashboard.recentActivity': 'Actividad reciente',
    'dashboard.noActivity': 'Sin actividad',
    'dashboard.noActivityInfo': 'Completa un escenario para ver tus resultados aquí.',
    'dashboard.workflows': 'Flujos de Trabajo',
    'dashboard.evaluations': 'Evaluaciones',
    'dashboard.bestScore': 'Mejor Puntuación',
    'dashboard.avgScore': 'Promedio',
    'dashboard.lastActivity': 'Última actividad',
    'dashboard.today': 'hoy',
    'dashboard.yesterday': 'ayer',
    'dashboard.daysAgo': 'hace {count} días',
    'dashboard.weeksAgo': 'hace {count} semanas',
    'dashboard.training': 'Entrenamiento',
    'dashboard.evaluation': 'Evaluación',
    'dashboard.continue': 'Continuar',
    'dashboard.start': 'Comenzar',
    'dashboard.viewDetails': 'Ver Detalles',
    'dashboard.completedWorkflows': 'Escenarios Completados',
    'dashboard.noCompletedWorkflows': 'Aún no hay flujos de trabajo completados',
    'dashboard.noCompletedWorkflowsInfo': 'Comienza a trabajar en escenarios para ver tus flujos de trabajo completados aquí.',
    'dashboard.startFirstWorkflow': 'Comienza tu Primer Flujo de Trabajo',
    'dashboard.reviewWorkflows': 'Revisa tus flujos de trabajo completados y continúa desarrollando tus procesos de IA',
    'dashboard.workflowHistory': 'Historial de Flujos',
    'dashboard.noWorkflows': 'Aún no hay flujos',
    'dashboard.viewAllWorkflows': 'Ver todos los {count} flujos',
    'dashboard.noScore': 'Sin puntuación',

  // Training (renamed branding)
  'training.title': 'Laboratorio de Flujos',
  'training.subtitle': 'Experimenta, crea y explora nuevos procesos potenciados por IA.',
    'training.createButton': 'Crear Nuevo Flujo de Trabajo',
    'training.filter': 'Filtrar:',
    'filter.all': 'Todos',

    // History
    'history.title': 'Tu Historial de Evaluaciones',
    'history.noHistory': 'No se encontró historial',
    'history.noEntries': 'Completa algunos escenarios de entrenamiento o evaluación para ver tu progreso aquí.',
    'history.viewDiagram': 'Ver diagrama enviado',
    'history.feedback': 'Comentarios:',
    'history.workflowExplanation': 'Tu explicación del flujo de trabajo:',
    'history.score': 'Puntuación',

    // Scenario card
    'scenario.custom': 'Personalizado',
    'scenario.deleteConfirm': '¿Eliminar este escenario? Esto no se puede deshacer.',
    'scenario.delete': 'Eliminar escenario',
    'scenario.start': 'Iniciar flujo de trabajo',
    'scenario.highScoreLabel': 'Mejor puntuación',
    'scenario.avgScoreLabel': 'Puntuación media',

  // AI Actions Panel
  'aiActions.title': 'Acciones de IA',
  'aiActions.subtitle': 'Genera y evalúa artefactos para {platform}.',
  'aiActions.platformFallback': 'tu plataforma',
  'aiActions.needWorkflow': 'Agrega una explicación del flujo arriba para habilitar las acciones.',
  'aiActions.platformOptions': 'Opciones de Plataforma',
  'toolsDocs.title': 'Herramientas y Docs',
  'toolsDocs.recent': 'Docs Recientes',
  'toolsDocs.latestPrd': 'Último PRD',
  'toolsDocs.latestPitch': 'Último Pitch',
  'prd.generateShort': 'PRD',
  'pitch.generateShort': 'Pitch',
  'evaluation.run': 'Evaluar',

    // Misc
    'loading': 'Cargando...',
    'noRecentActivity': 'Sin actividad reciente',

  // Auth
  'auth.signUp': 'Registrarse',
  'auth.signIn': 'Iniciar sesión',
  'auth.signInToContinue': 'Inicia sesión para continuar',
  'auth.createAccount': 'Crea tu cuenta',
  'auth.welcomeBack': 'Bienvenido de nuevo',

  // Platform labels
  'platform.ms365': 'Microsoft 365',
  'platform.google': 'Google Workspace',
  'platform.custom': 'Aplicación personalizada',
  'platform.customPrompt': 'Prompts personalizados',
  'platform.assistant': 'Asistente(s)',
  'platform.combination': 'Combinación',

  // Public landing
  'landing.problem.title': '¿Cuál es tu problema?',
  'landing.problem.subtitle': 'Describe tu desafío. Te ayudaremos a diseñar un flujo con IA y a generar un PRD adaptado a tu plataforma.',
  'landing.problem.label': 'Tu problema',
  'landing.problem.placeholder': 'p. ej., Nuestro equipo de soporte dedica horas a clasificar correos. Necesitamos categorizar solicitudes, redactar respuestas y escalar casos complejos automáticamente.',
  'landing.platform.label': 'Plataforma objetivo',
  'landing.domain.label': 'Dominio',
  'landing.domain.auto': 'Automático (recomendado)',
  'landing.domain.createNew': 'Crear dominio nuevo…',
  'landing.domain.customPlaceholder': 'p. ej., Cumplimiento, I+D, Operaciones de campo',
  'landing.cta.design': 'Diseñar mi flujo',
  'landing.cta.explore': 'Explorar funciones',
  'landing.alert.enterProblem': 'Cuéntanos tu problema para empezar.',
  'landing.alert.enterCustomDomain': 'Ingresa un nombre de dominio o elige Automático.',
  'landing.highlights.1.title': 'Redacta flujos con IA',
  'landing.highlights.1.desc': 'Convierte metas en pasos claros con asistencia de IA y diagramas Mermaid.',
  'landing.highlights.2.title': 'Genera PRDs por plataforma',
  'landing.highlights.2.desc': 'Crea PRDs listos para producto para Microsoft 365, Google Workspace o pilas personalizadas.',
  'landing.highlights.3.title': 'Perfecciona tu elevator pitch',
  'landing.highlights.3.desc': 'Genera y refina pitches concisos para guardar y compartir.',
  'landing.how.title': 'Cómo funciona',
  'landing.how.step1.title': '1. Describe tu objetivo',
  'landing.how.step1.desc': 'Comienza con un objetivo simple. Usa Asistencia IA para redactar los pasos.',
  'landing.how.step2.title': '2. Visualiza e itera',
  'landing.how.step2.desc': 'Renderiza diagramas Mermaid, ajusta pasos y refina con sugerencias.',
  'landing.how.step3.title': '3. Genera artefactos',
  'landing.how.step3.desc': 'Produce PRDs por plataforma y un elevator pitch. Guárdalos para después.',
  'landing.cta.createFirst': 'Crea tu primer flujo',
  'landing.preview.title': 'Mira un flujo de ejemplo',
  'landing.preview.subtitle': 'Aquí tienes un ejemplo rápido de cómo podría verse tu flujo asistido por IA. Regístrate para generar, editar y guardar el tuyo.',
  'landing.preview.exampleTitle': 'Ejemplo: Clasificación de tickets de soporte',
  'landing.preview.step1': 'Detectar correo entrante y extraer campos clave (remitente, asunto, cuerpo).',
  'landing.preview.step2': 'La IA categoriza intención y urgencia; un humano revisa casos límite.',
  'landing.preview.step3': 'Redactar respuesta con IA; enrutar a la cola o escalar a un agente.',
  'landing.preview.step4': 'Registrar resolución y recopilar feedback para mejora continua.',
  'landing.preview.platformNote': 'Adaptado para {platform}',
  'landing.preview.yourProblem': 'Tu problema',
  'landing.preview.sketchTitle': 'Resumen en una línea',
  'landing.preview.sketchTemplate': 'La IA analiza y enruta “{problem}” para {platform}{domainSuffix}, redacta resultados y escala casos límite.',
  'landing.preview.sketchDomainSuffix': ' en {domain}',
  'landing.preview.signup': 'Registrarse para continuar',
  'landing.preview.signin': 'Iniciar sesión',
  'landing.preview.close': 'Cerrar',
  // Domain names (display)
  'domain.Sales': 'Ventas',
  'domain.HR': 'RRHH',
  'domain.Finance': 'Finanzas',
  'domain.Operations': 'Operaciones',
  'domain.Logistics': 'Logística',
  'domain.Healthcare': 'Salud',
  'domain.Manufacturing': 'Manufactura',
  'domain.Legal': 'Legal',
  'domain.Procurement': 'Compras',
  'domain.Marketing': 'Marketing',
  'domain.IT': 'TI',
  'domain.Customer Support': 'Soporte al Cliente',
  'common.close': 'Cerrar',
  }
};

type I18nContextShape = {
  lang: Lang;
  setLang: (l: Lang) => void;
  t: (key: string, vars?: Record<string, string | number>) => string;
};

const I18nContext = createContext<I18nContextShape>({
  lang: 'English',
  setLang: () => {},
  t: (k) => k,
});

export const I18nProvider: React.FC<{ initial?: Lang } & { children?: React.ReactNode }> = ({ initial = 'English', children }) => {
  const [lang, setLang] = useState<Lang>(initial);
  // Listen for profile-updated events so the provider can switch language immediately
  React.useEffect(() => {
    const onProfileUpdated = (e: Event) => {
      try {
        const detail = (e as CustomEvent).detail as { preferredLanguage?: Lang } | undefined;
        // Debug: log profile-updated events to help diagnose why language changes may not apply
        // eslint-disable-next-line no-console
        console.debug('[I18n] profile-updated event received', detail);
        if (detail && detail.preferredLanguage) {
          // eslint-disable-next-line no-console
          console.debug('[I18n] switching language to', detail.preferredLanguage);
          setLang(detail.preferredLanguage);
        }
      } catch (err) {
        // ignore
      }
    };
    if (typeof window !== 'undefined') {
      window.addEventListener('profile-updated', onProfileUpdated as EventListener);
    }
    return () => {
      if (typeof window !== 'undefined') {
        window.removeEventListener('profile-updated', onProfileUpdated as EventListener);
      }
    };
  }, []);
  const t = (key: string, vars?: Record<string, string | number>) => {
    const dict = resources[lang] || resources['English'];
    const raw = dict[key] ?? key;
    if (!vars) return raw;
    return Object.keys(vars).reduce((s, k) => s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(vars[k])), raw);
  };
  const value = useMemo(() => ({ lang, setLang, t }), [lang]);
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
};

export const useTranslation = () => useContext(I18nContext);

export default resources;
